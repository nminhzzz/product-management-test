extends ../../layouts/default

include ../../mixins/pagination
include ../../mixins/filter-status
include ../../mixins/search
include ../../mixins/form-change-multi
include ../../mixins/alert



block main
  +alert-success("5000")
      

  h1 Quản lý sản phẩm

  .row
    .col-6
      +filter-status(filterStatus)
    .col-6
      +search(keyword)

  .card.mb-3
    .card-header Danh sách
    .card-body
      +form-change-multi(`${prefixAdmin}/products/change-multi?_method=PATCH`)      
      

  table(class="table table-hover table-sm" checkbox-multi)
    thead
      tr
        th
          input(type="checkbox" name="checkAll")
        th STT
        th Hình ảnh
        th Tiêu đề
        th Giá
        th Vị trí 
        th Trạng thái
        th Hành động

    tbody
      each item, index in products
        tr
          td
            input(type="checkbox" name="id" value=item._id)
          td #{index + 1}
          td
            img(
              src=item.thumbnail
              alt=item.title
              width="80"
            )
          td #{item.title}
          td #{item.price}$
          td
            input(
            type="number"
            value=item.position
            style="width: 60px"
            min="1"
            name="position")
          
            if item.status == "active"
              a.badge.badge-success(
                href="javascript:;"
                data-status=item.status
                data-id=item.id
                button-change-status
              ) Hoạt động
            else
              a.badge.badge-danger(
                href="javascript:;"
                data-status=item.status
                data-id=item.id
                button-change-status
              ) Dừng hoạt động
          td
            button.btn.btn-warning.btn-sm Sửa
            button(class="btn btn-danger btn-sm" button-delete data-id=item._id) Xóa

  +pagination(pagination)

  form(
    id="form-change-status"
    method="POST"
    data-path=`${prefixAdmin}/products/change-status`
  )

  form(
    id="form-delete-item"
    method="POST"
    data-path=`${prefixAdmin}/products/delete`
  )
  script(src="/admin/js/product.js")
